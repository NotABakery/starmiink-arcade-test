<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>STARMIINK Minigame</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  html, body {
    margin: 0; padding: 0; height: 100%;
    background: black;
    background-image: url('arcade-border.png');
    background-repeat: no-repeat;
    background-position: center center;
    background-size: contain;
    font-family: 'Press Start 2P', monospace;
    color: #00ffff;
    overflow: hidden;
  }

  .menu-bar {
    position: fixed;
    top: 10px;
    left: 10px;
    z-index: 9999;
  }

  .menu-bar select {
    background: #000;
    color: #00ffff;
    border: 2px solid #00ffff;
    padding: 5px;
    font-size: 10px;
    font-family: 'Press Start 2P', monospace;
    cursor: pointer;
  }

  .cart-icon {
    position: fixed;
    top: 10px;
    right: 10px;
    font-size: 20px;
    color: #00ffff;
    z-index: 9999;
    cursor: pointer;
    user-select: none;
    text-shadow: 0 0 10px #00ffff;
  }

  #game-container {
    position: relative;
    width: 90vw;
    max-width: 1280px;
    height: 70vh;
    margin: 70px auto 60px;
    background: #001111;
    border: 4px solid #00ffff;
    border-radius: 12px;
    box-shadow: 0 0 20px #00ffffaa;
    overflow: hidden;
  }

  canvas {
    display: block;
    background: #000011;
    margin: 0 auto;
    border-radius: 8px;
  }

  /* Mobile controls */
  #controls {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 90vw;
    max-width: 400px;
    display: flex;
    justify-content: space-around;
    z-index: 10000;
    user-select: none;
  }

  button.control-btn {
    background: #000022;
    border: 2px solid #00ffff;
    color: #00ffff;
    font-size: 16px;
    padding: 12px 18px;
    border-radius: 10px;
    cursor: pointer;
    width: 80px;
    user-select: none;
    box-shadow: 0 0 8px #00ffffaa;
  }
  button.control-btn:active {
    background: #00ffff;
    color: #000;
  }
</style>
</head>
<body>

<div class="menu-bar">
  <select onchange="navigateMenu(this)">
    <option value="">‚ò∞ MENU</option>
    <option value="index.html">üè† Home</option>
    <option value="shop.html">üõçÔ∏è Shop</option>
    <option value="lookbook.html">üßµ Lookbook</option>
    <option value="account.html">üë§ Account</option>
    <option value="about.html">üìñ About</option>
    <option value="contact.html">üì¨ Contact</option>
    <option value="newsletter.html">üì∞ Newsletter</option>
  </select>
</div>

<div class="cart-icon" onclick="alert('üõí Cart is currently empty.')">üõí</div>

<div id="game-container">
  <canvas id="game" width="900" height="480"></canvas>
</div>

<div id="controls">
  <button id="leftBtn" class="control-btn">‚óÄ</button>
  <button id="jumpBtn" class="control-btn">‚ñ≤</button>
  <button id="rightBtn" class="control-btn">‚ñ∂</button>
</div>

<script>
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  const GRAVITY = 0.6;
  const FRICTION = 0.85;

  // Player star using image sprite
  const playerImg = new Image();
  playerImg.src = 'starmiink-3d.gif';

  const player = {
    x: 50,
    y: 400,
    width: 40,
    height: 40,
    dx: 0,
    dy: 0,
    speed: 4,
    jumping: false,
    grounded: false,
  };

  // Platforms
  const platforms = [
    { x: 0, y: 450, width: 900, height: 30 },
    { x: 200, y: 380, width: 150, height: 20 },
    { x: 450, y: 320, width: 150, height: 20 },
    { x: 700, y: 260, width: 150, height: 20 },
  ];

  let leftPressed = false;
  let rightPressed = false;

  function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Horizontal movement
    if (leftPressed) {
      player.dx = -player.speed;
    } else if (rightPressed) {
      player.dx = player.speed;
    } else {
      player.dx *= FRICTION;
    }

    // Gravity
    player.dy += GRAVITY;

    // Move player
    player.x += player.dx;
    player.y += player.dy;

    // Collision detection
    player.grounded = false;
    for (let plat of platforms) {
      if (player.x < plat.x + plat.width &&
          player.x + player.width > plat.x &&
          player.y + player.height < plat.y + plat.height &&
          player.y + player.height + player.dy >= plat.y) {
        player.y = plat.y - player.height;
        player.dy = 0;
        player.grounded = true;
        player.jumping = false;
      }
    }

    if (player.y + player.height > canvas.height) {
      player.y = canvas.height - player.height;
      player.dy = 0;
      player.grounded = true;
      player.jumping = false;
    }

    if (player.x < 0) player.x = 0;
    if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;

    // Draw platforms
    ctx.fillStyle = '#005555';
    for (let plat of platforms) {
      ctx.fillRect(plat.x, plat.y, plat.width, plat.height);
      ctx.strokeStyle = '#00ffff';
      ctx.lineWidth = 2;
      ctx.strokeRect(plat.x, plat.y, plat.width, plat.height);
    }

    // Draw player image
    ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);

    requestAnimationFrame(update);
  }

  window.addEventListener('keydown', e => {
    if (e.code === 'ArrowLeft') leftPressed = true;
    if (e.code === 'ArrowRight') rightPressed = true;
    if ((e.code === 'ArrowUp' || e.code === 'Space') && player.grounded) {
      player.dy = -12;
      player.jumping = true;
      player.grounded = false;
    }
  });

  window.addEventListener('keyup', e => {
    if (e.code === 'ArrowLeft') leftPressed = false;
    if (e.code === 'ArrowRight') rightPressed = false;
  });

  const leftBtn = document.getElementById('leftBtn');
  const rightBtn = document.getElementById('rightBtn');
  const jumpBtn = document.getElementById('jumpBtn');

  leftBtn.addEventListener('touchstart', e => { e.preventDefault(); leftPressed = true; });
  leftBtn.addEventListener('touchend', e => { e.preventDefault(); leftPressed = false; });

  rightBtn.addEventListener('touchstart', e => { e.preventDefault(); rightPressed = true; });
  rightBtn.addEventListener('touchend', e => { e.preventDefault(); rightPressed = false; });

  jumpBtn.addEventListener('touchstart', e => {
    e.preventDefault();
    if (player.grounded) {
      player.dy = -12;
      player.jumping = true;
      player.grounded = false;
    }
  });

  jumpBtn.addEventListener('touchend', e => e.preventDefault());

  update();

  function navigateMenu(select) {
    const destination = select.value;
    if (destination) window.location.href = destination;
  }
</script>

</body>
</html>
